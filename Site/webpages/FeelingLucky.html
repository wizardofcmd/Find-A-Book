<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>Feeling Lucky</title>
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<meta charset="UTF-8">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="../css/style.css">
		<script src="../js/jquery-1.6.1.min.js"></script>
		<script>
			$(document).ready(function() {
			
			
			$( "#btn_ran_id" ).click(function() {
			var items;
			var title_arr; // where array of titles are going to be saved from data
			var auth_arr;
			var categ_arr;
			var img_link_arr;
			var info_link_arr;
			
			var random_string='';
			var character="abcdefghijklmnopqrstuvwxyz1234567890";
			for (var i,i=0;i<1;i++){
				random_string+=character.charAt(Math.floor(Math.random()*character.length))
			}
			book_data = random_string;
			
			//alert(book_data);//for testing Purposes
			console.log(book_data);
			
			// broken link, book_data value changed
			$.ajax({type: "POST",
				url: '../php/randhandler.php',
				data: {bookdata: book_data},  
				dataType: 'json',
				
				success: function(data){
					$("#sl_books").show();
					$("#viewport").show();
					//console.log(data);
							
					// for # of books retrieved, create long string of all titles/authors/categories/etc.
					for (var i = 0; i < data.length - 1 ; i++) {
						title_arr += data[i].title+"||"; //gets data from json for every variable
						auth_arr += JSON.stringify(data[i].authors)+"||"; // have to stringify because its an object
						categ_arr += JSON.stringify(data[i].categories)+"||";
						img_link_arr += data[i].imageLinks.thumbnail+"||";
						info_link_arr += data[i].infoLink+"||"; 
						}
							
					var select = document.getElementById('result'); // create javascript variable based on existing html tag
					$(select).html('');
						for (var i in data) { // move through data sent from bookhandler.php
								
						$(select).append('<option value=' + data[i] + '>' + data[i]['title'] + '</option>'); // for every index create HTML as follows and append to chosen html tag	
						$(select).append('<option value=' + data[i] + '>' + data[i]['authors'] + '</option>');
						$(select).append('<option value=' + data[i] + '>' + data[i]['thumbnail'] + '</option>');
						
							}
				}}); 
				
		});
	});
</script>
</head>
<body data-spy="scroll" data-target=".navbar" data-offset="50">
	<!--Nav Bar-->
	<nav class="navbar navbar-inverse">
	<div class="container">
	<div class="navbar-header">
	<a class="navbar-brand" href="#">FindABook</a>
	</div>
	<button class="navbar-toggle" data-toggle="collapse" data-target=".navHeaderCollapse"> 
	Menu
	</button>
	<div class="collapse navbar-collapse navHeaderCollapse">
	<ul class ="nav navbar-nav navbar-right">
<li><a href="index.php"><span class="glyphicon glyphicon-home"></span>Home</a></li>
<li><a href="About.html"><span class="glyphicon glyphicon-info-sign"></span>About</a></li>
<li><a href="review.html"><span class="glyphicon glyphicon-envelope"></span>Reviews</a></li>
</ul>
</div>
</div>
</nav>
<!--Nav Bar-->
<!--Display Book-->
<div class="container ">
<!--Tite-->
		<div class="container">
			<h2>Feeling Lucky!!!</h2>
		</div>
<!--Title-->
	<div class="container">
		<div class="col-md-2"></div>
		<div class="col-md-8">
			</br>
			<!--select id="opt_books"></select-->
			<button value="btn_ran_val"  class="btn btn-info-dark " id="btn_ran_id" >Have You Read...</button>
			<div id="result">
				<img src="" alt="" class="thumbnail" /> 
			</div>
			</br>
			<!--<a href="#"><span class="glyphicon glyphicon-thumbs-up"></span>See Reviews</a>-->
		</div>
		<div class="col-md-2"></div>
		
		<!--Book Description-->
	</div>
</div>
<!--Display Book-->
</br>
<!--Footer-->
<div class="alt">
	<div class="container fixed-bottom">	
		<footer class="page-footer font-small  pt-4 special-color-dark">
			<div class="footer-copyright text-center py-3">&copy; FindABook<br/>
			</div>
		</footer>
	</div>
</div>

<!--Footer-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

</body>
</html>			